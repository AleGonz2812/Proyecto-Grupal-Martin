<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.text.Text?>

<!--
    Vista del Dashboard Principal
    
    Pantalla principal tras el login exitoso.
    Muestra:
    - Barra superior con info del usuario y botÃ³n de logout
    - MenÃº lateral con opciones segÃºn el rol del usuario
    - Ãrea central para cargar diferentes vistas (eventos, compras, etc.)
    
    Controlador: DashboardController.java
-->
<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.eventos.controllers.DashboardController"
            prefHeight="800" prefWidth="1200">
    
    <!-- BARRA SUPERIOR (TOP) -->
    <top>
        <HBox styleClass="top-bar"
              alignment="CENTER_LEFT"
              spacing="20"
              style="-fx-background-color: #2c3e50; -fx-padding: 15;">
            
            <!-- TÃ­tulo de la aplicaciÃ³n -->
            <Text text="Sistema de GestiÃ³n de Eventos"
                  fill="WHITE"
                  style="-fx-font-size: 20; -fx-font-weight: bold;"/>
            
            <!-- Espaciador flexible -->
            <Region HBox.hgrow="ALWAYS"/>
            
            <!-- InformaciÃ³n del usuario -->
            <HBox alignment="CENTER" spacing="15">
                <Label fx:id="welcomeLabel"
                       text="Bienvenido/a"
                       textFill="WHITE"
                       style="-fx-font-size: 14; -fx-font-weight: bold;"/>
                
                <Label fx:id="roleLabel"
                       text="[Rol]"
                       textFill="#95a5a6"
                       style="-fx-font-size: 12;"/>
                
                <!-- BotÃ³n de cerrar sesiÃ³n -->
                <Button fx:id="logoutButton"
                        text="Cerrar SesiÃ³n"
                        onAction="#handleLogout"
                        style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-font-weight: bold;"/>
            </HBox>
        </HBox>
    </top>
    
    <!-- MENÃš LATERAL (LEFT) -->
    <left>
        <VBox styleClass="sidebar"
              spacing="10"
              style="-fx-background-color: #34495e; -fx-padding: 20; -fx-min-width: 250;">
            
            <!-- TÃ­tulo del menÃº -->
            <Label text="MENÃš PRINCIPAL"
                   textFill="WHITE"
                   style="-fx-font-size: 16; -fx-font-weight: bold;">
                <VBox.margin>
                    <Insets bottom="20"/>
                </VBox.margin>
            </Label>
            
            <Separator style="-fx-background-color: white;"/>
            
            <!-- Opciones del menÃº -->
            <VBox spacing="5" fx:id="menuContainer">
                
                <!-- Inicio -->
                <Button text="ðŸ  Inicio"
                        onAction="#handleInicio"
                        prefWidth="210"
                        style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: CENTER_LEFT; -fx-font-size: 14;"/>
                
                <!-- Eventos -->
                <Button text="ðŸŽ­ Eventos"
                        onAction="#handleEventos"
                        prefWidth="210"
                        style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: CENTER_LEFT; -fx-font-size: 14;"/>
                
                <!-- Mis Entradas -->
                <Button text="ðŸŽŸï¸ Mis Entradas"
                        onAction="#handleMisEntradas"
                        prefWidth="210"
                        style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: CENTER_LEFT; -fx-font-size: 14;"/>
                
                <!-- Comprar Entradas -->
                <Button text="ðŸ›’ Comprar Entradas"
                        onAction="#handleComprar"
                        prefWidth="210"
                        style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: CENTER_LEFT; -fx-font-size: 14;"/>
                
                <Separator style="-fx-background-color: white;">
                    <VBox.margin>
                        <Insets top="10" bottom="10"/>
                    </VBox.margin>
                </Separator>
                
                <!-- OPCIONES DE ADMINISTRADOR (solo visible si es admin) -->
                <VBox fx:id="adminMenuContainer" spacing="5">
                    <Label text="ADMINISTRACIÃ“N"
                           textFill="#95a5a6"
                           style="-fx-font-size: 12; -fx-font-weight: bold;">
                        <VBox.margin>
                            <Insets bottom="5"/>
                        </VBox.margin>
                    </Label>
                    
                    <Button text="ðŸ‘¥ GestiÃ³n de Usuarios"
                            onAction="#handleGestionUsuarios"
                            prefWidth="210"
                            style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: CENTER_LEFT; -fx-font-size: 14;"/>
                    
                    <Button text="ðŸŽª GestiÃ³n de Eventos"
                            onAction="#handleGestionEventos"
                            prefWidth="210"
                            style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: CENTER_LEFT; -fx-font-size: 14;"/>
                    
                    <Button text="ðŸ¢ GestiÃ³n de Sedes"
                            onAction="#handleGestionSedes"
                            prefWidth="210"
                            style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: CENTER_LEFT; -fx-font-size: 14;"/>
                    
                    <Button text="ðŸ“Š Reportes"
                            onAction="#handleReportes"
                            prefWidth="210"
                            style="-fx-background-color: transparent; -fx-text-fill: white; -fx-alignment: CENTER_LEFT; -fx-font-size: 14;"/>
                </VBox>
            </VBox>
            
            <!-- Espaciador -->
            <Region VBox.vgrow="ALWAYS"/>
            
            <!-- Pie del menÃº -->
            <VBox alignment="CENTER" spacing="5">
                <Separator style="-fx-background-color: white;"/>
                <Label text="VersiÃ³n 1.0.0"
                       textFill="#95a5a6"
                       style="-fx-font-size: 10;"/>
            </VBox>
        </VBox>
    </left>
    
    <!-- ÃREA CENTRAL (CENTER) -->
    <center>
        <StackPane fx:id="contentArea"
                   style="-fx-background-color: #ecf0f1; -fx-padding: 30;">
            
            <!-- Contenido inicial (Home) -->
            <VBox alignment="CENTER" spacing="30">
                <Text text="Bienvenido al Sistema de GestiÃ³n de Eventos"
                      style="-fx-font-size: 28; -fx-font-weight: bold; -fx-fill: #2c3e50;"/>
                
                <Text fx:id="welcomeMessageText"
                      text="Selecciona una opciÃ³n del menÃº para comenzar"
                      style="-fx-font-size: 16; -fx-fill: #7f8c8d;"/>
                
                <!-- Panel de estadÃ­sticas rÃ¡pidas -->
                <HBox spacing="20" alignment="CENTER">
                    
                    <!-- Card: PrÃ³ximos Eventos -->
                    <VBox alignment="CENTER"
                          spacing="10"
                          style="-fx-background-color: white; -fx-padding: 30; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
                        <Text text="ðŸŽ­" style="-fx-font-size: 40;"/>
                        <Text text="PrÃ³ximos Eventos" style="-fx-font-size: 14; -fx-fill: #7f8c8d;"/>
                        <Text fx:id="eventosCountText" text="0" style="-fx-font-size: 32; -fx-font-weight: bold; -fx-fill: #3498db;"/>
                    </VBox>
                    
                    <!-- Card: Mis Entradas -->
                    <VBox alignment="CENTER"
                          spacing="10"
                          style="-fx-background-color: white; -fx-padding: 30; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
                        <Text text="ðŸŽŸï¸" style="-fx-font-size: 40;"/>
                        <Text text="Mis Entradas" style="-fx-font-size: 14; -fx-fill: #7f8c8d;"/>
                        <Text fx:id="entradasCountText" text="0" style="-fx-font-size: 32; -fx-font-weight: bold; -fx-fill: #2ecc71;"/>
                    </VBox>
                    
                    <!-- Card: Total Usuarios (solo admin) -->
                    <VBox fx:id="adminStatsCard"
                          alignment="CENTER"
                          spacing="10"
                          style="-fx-background-color: white; -fx-padding: 30; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);"
                          visible="false">
                        <Text text="ðŸ‘¥" style="-fx-font-size: 40;"/>
                        <Text text="Total Usuarios" style="-fx-font-size: 14; -fx-fill: #7f8c8d;"/>
                        <Text fx:id="usuariosCountText" text="0" style="-fx-font-size: 32; -fx-font-weight: bold; -fx-fill: #9b59b6;"/>
                    </VBox>
                </HBox>
            </VBox>
        </StackPane>
    </center>
    
</BorderPane>
